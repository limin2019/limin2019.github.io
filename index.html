<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Limin</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
  <link rel="stylesheet" href="./styles/index.css">
  <link rel="stylesheet" href="./fonts/iconfont.css">
</head>
<body>
  <div class="container py-5">
    <p class="text-center">项目：解密唐朝诗人关系</p>
    <div class="card border-0">
      <div class="card-body">
        <p class="card-title font-weight-normal"><i class="icon iconfont icon-xinbaniconshangchuan-5 icon-md text-info"></i> 研究目标</p>
        <p class="card-text text-sm text-indent">提到唐朝诗人，李白和杜甫大家都耳熟能详，那么他们是密友吗？也就是二人都互相“喜欢”吗？杜甫曾在诗中直抒对李白的景仰之情：“白也诗无敌，飘然思不群”，杜甫寄情于李白；但李白却直抒对孟浩然的热爱之情：“吾爱孟夫子，风流天下闻。”；而孟浩然写诗给谁呢？《留别王维》！好吧，那你知道李白和王维是什么关系吗？其他唐朝诗人之间的关系又是怎么样的呢？这节课我们就一起进入“解密唐朝诗人关系”项目中，期望通过编程的方式给大家呈现“别具一格”的研究成果。</p>
        <p class="card-title text-sm">具体研究目标为：</p>
        <ul class="list-group list-group-flush">
          <li class="list-group-item text-sm border-0 py-1">1. 分析诗人之间关系的查找范围和判断条件，设计问题求解的枚举算法。</li>
          <li class="list-group-item text-sm border-0 py-1">2. 借助Python编程实现算法，查找诗人之间题诗的数量，并绘制出关系图。</li>
        </ul>
      </div>
    </div>
    <div class="card border-0">
      <div class="card-body">
        <p class="card-title font-weight-normal"><i class="icon iconfont icon-xinbaniconshangchuan-7 icon-md text-info"></i> 研究准备</p>
        <ul class="list-group list-group-flush">
          <li class="list-group-item text-sm border-0 py-1">1. 四人一组，互助合作完成项目。</li>
          <li class="list-group-item text-sm border-0 py-1">2.安装好Python编程环境，准备好诗词库。</li>
        </ul>
      </div>
    </div>
    <div class="card border-0">
      <div class="card-body">
        <p class="card-title font-weight-normal"><i class="icon iconfont icon-xinbaniconshangchuan-9 icon-md text-info"></i> 研究过程</p>
      </div>
      <div class="card">
        <div class="card-header">活动1 【项目预热】人工方式查找唐朝诗人之间的关系（看看哪位诗人提诗@对方了？）</div>
        <div class="card-body">
          <p>
            <i class="icon iconfont icon-xinbaniconshangchuan-6 icon-md text-warning"></i>
            <span class="text-white bg-warning text-sm-only">要求</span>
            从诗词库(data.txt)中找出“杜甫、李白、孟浩然、王维、贺知章”五人间的题诗关系。比比看 2 分钟内哪 组找到的关系最多?
          </p>
          <p><i class="icon iconfont icon-xinbaniconshangchuan-1 icon-md text-warning"></i> <span class="text-white bg-danger text-sm-only">提示</span></p>
          <ul class="list-group list-group-flush">
            <li class="list-group-item text-sm border-0 py-1">1. 在 《data.txt》 文件中可以通过快捷键 <kbd><kbd>Ctrl</kbd> + <kbd>F</kbd></kbd> 打开“查找对话框” ，如图 2 所示;然后将杜 甫所有诗句选中复制到新文件(【文件】→【新建】)中，再依次查找李白</li>
            <li class="list-group-item text-sm border-0 py-1">2. 为了提高效率，各组长要合理安排成员的分工，进行团队合作。</li>
          </ul>
          <p>第一步：查找诗人关系(可参考后面的提示操作)，填写下表</p>
          <table>
            <tr>
              <td rowspan="2" width="150px"></td>
              <td colspan="3">检验关系</td>
              <td rowspan="2" width="250px">关系分析</td>
            </tr>
            <tr>
              <td width="80">作者</td>
              <td width="200">题目</td>
              <td>诗句</td>
            </tr>
            <tr>
              <td rowspan="8" width="150px">杜甫@李白</td>
              <td rowspan="8" width="80">杜甫</td>
              <td width="200">《春日忆李白》</td>
              <td class="js_bunde" name="input-1" contenteditable="true"></td>
              <td rowspan="2" width="150px">☑有关系  □无关系</td>
            </tr>
            <tr>
              <td width="200">《饮中八仙歌》</td>
              <td >李白一斗诗百篇</td>

            </tr>
            <tr>
              <td class="js_bunde" name="input-2" contenteditable="true"></td>
              <td class="js_bunde" name="input-3" contenteditable="true"></td>
              <td width="150px">赠诗数量</td>
            </tr>
            <tr>
              <td class="js_bunde" name="input-4" contenteditable="true"></td>
              <td class="js_bunde" name="input-5" contenteditable="true"></td>
              <td rowspan="5" class="js_bunde" name="input-6" contenteditable="true">_____首</td>
            </tr>
            <tr>
              <td class="js_bunde" name="input-7" contenteditable="true"></td>
              <td class="js_bunde" name="input-8" contenteditable="true"></td>
            </tr>
            <tr>
              <td class="js_bunde" name="input-9" contenteditable="true"></td>
              <td class="js_bunde" name="input-10" contenteditable="true"></td>

            </tr>
            <tr>
              <td class="js_bunde" name="input-11" contenteditable="true"></td>
              <td class="js_bunde" name="input-12" contenteditable="true"></td>

            </tr>
            <tr>
              <td class="js_bunde" name="input-13" contenteditable="true"></td>
              <td class="js_bunde" name="input-14" contenteditable="true"></td>

            </tr>
            <tr>
              <td class="js_bunde" name="input-22" contenteditable="true" rowspan="5"></td>
              <td class="js_bunde" name="input-23" contenteditable="true"></td>
              <td class="js_bunde" name="input-24" contenteditable="true"></td>
              <td class="js_bunde" name="input-25" contenteditable="true"></td>
              <td class="js_bunde" name="input-26" contenteditable="true"></td>
            </tr>
            <tr>
              <td class="js_bunde" name="input-27" contenteditable="true"></td>
              <td class="js_bunde" name="input-28" contenteditable="true"></td>
              <td class="js_bunde" name="input-29" contenteditable="true"></td>
              <td class="js_bunde" name="input-30" contenteditable="true"></td>
            </tr>
            <tr>
              <td class="js_bunde" name="input-31" contenteditable="true"></td>
              <td class="js_bunde" name="input-32" contenteditable="true"></td>
              <td class="js_bunde" name="input-33" contenteditable="true"></td>
              <td class="js_bunde" name="input-34" contenteditable="true"></td>
            </tr>
            <tr>
              <td class="js_bunde" name="input-35" contenteditable="true"></td>
              <td class="js_bunde" name="input-36" contenteditable="true"></td>
              <td class="js_bunde" name="input-37" contenteditable="true"></td>
              <td class="js_bunde" name="input-38" contenteditable="true"></td>
            </tr>
            <tr>
              <td class="js_bunde" name="input-39" contenteditable="true"></td>
              <td class="js_bunde" name="input-40" contenteditable="true"></td>
              <td class="js_bunde" name="input-41" contenteditable="true"></td>
              <td class="js_bunde" name="input-42" contenteditable="true"></td>
            </tr>
          </table>
          <p style="margin-top: 15px;">【该步骤省略不做】第二步：根据表中的关系分析，绘制诗人关系图</p>
          <div class="image-container">
            <div class="img" title="图1" ><img src="./images/img-1.png" alt=""></div>
            <div class="img" title="图2"><img src="./images/img-3.png" alt=""></div>
          </div>
        </div>
      </div>
      <div class="card mt-5">
        <div class="card-header">活动 2 【项目体验 1】依据算法流程图，完善 Python 程序查找诗人关系</div>
        <div class="card-body">
            <p>
              <i class="icon iconfont icon-xinbaniconshangchuan-6 icon-md text-warning"></i>
              <span class="text-white bg-warning text-sm-only">要求</span>
              结合项目问题中枚举算法设计的流程图，从“枚举范围”、“验证条件”、“枚举对象”等方面对指定程序 进行完善(可以两人一组互助完成)，实现查找诗人关系并显示题诗数量。
            </p>
            <p><i class="icon iconfont icon-xinbaniconshangchuan-1 icon-md text-warning"></i> <span class="text-white bg-danger text-sm-only">提示</span></p>
            <ul class="list-group list-group-flush">
              <li class="list-group-item text-sm border-0 py-1">1. 打开程序文件:右键单击文件“查找诗人关系 v1.0.x.py”，选择 Edit with IDEL 命令打开文件。</li>
              <li class="list-group-item text-sm border-0 py-1"> 2. 完善程序文件:结合枚举算法设计，对照图3提示的程序语句功能，选择下列程序语句在程序中填空位置填写程序语句(注意切换英 文输入状态)。</li>
              <li class="list-group-item text-sm border-0 py-1">  for  poem   in   poems:   #确定范围</li>
              <li class="list-group-item text-sm border-0 py-1">  if   jia   in poem[2] and (  yi  in poem[0] or yi  in poem[3]) : #验证条件</li>
              <li class="list-group-item text-sm border-0 py-1">  gx = gx + 1   #枚举对象
                <div class="image-container" style="margin-top: 15px;">
                  <div class="img" title="图3: 程序分解图"><img src="./images/img-2.png" alt=""></div>
                </div>
              </li>
              <li class="list-group-item text-sm border-0 py-1">
                3.保存并运行程序:根据程序运行结果，填写下面表格。
                <table style="margin-top: 15px;">
                  <tr>
                    <td>诗人甲 → 诗人乙</td>
                    <td>杜甫 → 李白</td>
                    <td>李白 → 杜甫</td>
                    <td>李白 → 孟浩然</td>
                    <td>孟浩然 → 李白</td>
                    <td>李白 → 王维</td>
                    <td>王维 → 李白</td>
                  </tr>
                  <tr>
                    <td>题诗数量</td>
                    <td class="js_bunde" name="input-43" contenteditable="true"></td>
                    <td class="js_bunde" name="input-44" contenteditable="true"></td>
                    <td class="js_bunde" name="input-45" contenteditable="true"></td>
                    <td class="js_bunde" name="input-46" contenteditable="true"></td>
                    <td class="js_bunde" name="input-47" contenteditable="true"></td>
                    <td class="js_bunde" name="input-48" contenteditable="true"></td>
                  </tr>
                  <tr>
                    <td colspan="7" style="text-align: left; padding-left: 20px;">完成表格之后，可以查询其他感兴趣诗人之间的题诗数量。</td>
                  </tr>
                </table>
              </li>
            </ul>
        </div>
      </div>
      <div class="card mt-5">
        <div class="card-header">活动 3 【项目体验 2】分析运行结果，修改算法完善程序</div>
        <div class="card-body">
            <p>
              <i class="icon iconfont icon-xinbaniconshangchuan-6 icon-md text-warning"></i>
              <span class="text-white bg-warning text-sm-only">要求</span>
              根据程序运行出现的古诗缺漏问题，以及可视化呈现诗人关系的需求，继续修改算法完善程序(每组任选一个任务小组合作完成)
            </p>
            <p class="task-title">任务一：古诗缺漏:</p>
            <p class="task-content">古代，很多诗人都有别称，诗人之间经常称呼对方的别称。在此，我们从哈佛大学编纂的《中国历代人物专辑 资料库》中查找得到了这些古诗人对应的别称并导入别称库。下面请同学们修改算法，补全代码完善程序功能。</p>
            <p><i class="icon iconfont icon-xinbaniconshangchuan-1 icon-md text-warning"></i> <span class="text-white bg-danger text-sm-only">提示</span></p>
            <ul class="list-group list-group-flush">
              <li class="list-group-item text-sm border-0 py-1">
                1. 诗句遗漏从枚举算法三要素分析，应属于 <span class="js_bunde text-input" name="input-49" contenteditable="true"></span> 设计上出现问题(枚举范围/枚举对象/枚举条件)， 请对照算法设计，思考该功能完善的地方应为: <span contenteditable="true" class="js_bunde text-input" name="input-50"></span>。(填写出对应位置的字母:A/B)
                <div class="image-container" style="margin-top: 20px;">
                  <div class="img" title="图4"><img src="./images/img-4.png" alt=""></div>
                </div>
              </li>
              <li class="list-group-item text-sm border-0 py-1">
                2. 【该过程省略，直接运行《学生用》文件夹中的程序“查找诗人关系v2.0.py”】将别名查找代码(下面黄色阴影标注的范围)复制到程序中的对应位置（A或B的位置），注意缩进对齐。
                <code>
                  <pre>
                <span class="yellow-bg">for k, v in alter.alter_names_dict.items():
                    if jia in poem[2] and yi == k:
                        for i in v:
                            if i in poem[0] or i in poem[3]:
                                gx = gx + 1</span>
                  </pre>
                </code>
              </li>
              <li class="list-group-item text-sm border-0 py-1">3. 运行程序，修改活动 2 的表格，统计出正确的诗人题诗数量。</li>
            </ul>
            <p class="task-title">任务 2:古诗数量的可视化:</p>
            <p class="task-content">在活动 2 中，程序运行结果为数值显示，为了让诗人之间的关系表达更加一目了然，我们可以用箭头来表示两 个诗人题诗关系，并以线段的粗细表示题诗数量的多少。</p>
            <p><i class="icon iconfont icon-xinbaniconshangchuan-1 icon-md text-warning"></i> <span class="text-white bg-danger text-sm-only">提示</span></p>
            <ul class="list-group list-group-flush">
              <li class="list-group-item text-sm border-0 py-1">
                1. 1.可视化诗人关系是在枚举出题诗数量 <span class="js_bunde text-input" name="input-51" contenteditable="true"></span> (之前/之中/之后),因此，该功能实现的代码应在 <span class="js_bunde text-input" name="input-52" contenteditable="true"></span> 位置。(A/B/C)
                <div class="image-container" style="margin-top: 20px;">
                  <div class="img" title="图5"><img src="./images/img-5.png" alt=""></div>
                </div>
              </li>
              <li class="list-group-item text-sm border-0 py-1">
                2. 将可视化诗人关系代码(下面黄色阴影标注的范围)复制到《学生用》文件夹中的程序“查找诗人关系v2.0.py”程序的对应位置。
                <code>
                    <pre><span class="yellow-bg">
        # 用箭头的粗细表达关系
        root = tkinter.Tk()
        root.geometry('600x200')
        root.wm_attributes('-topmost',1)
        columnFont =('微软雅黑',20)
        titleFont = ('微软雅黑',20,'bold')
        cv=tkinter.Canvas(root,bg='white',width=500,height=200)
        cv.create_text((20, 100),text = jia, font = columnFont, fill = 'gray', anchor = 'w', justify = 'left')
        cv.create_text((250, 100), text = yi, font = columnFont, fill= 'gray', anchor = 'w', justify = 'left')
        if gx != 0:
            cv.create_line((80, 100, 240, 100), arrow = 'last', arrowshape = '20 20 3', width = gx, joinstyle = 'bevel')
        cv.pack()
        root.mainloop()</span>
                    </pre>
                </code>
              </li>
              <li class="list-group-item text-sm border-0 py-1">3. 运行程序(如果查看其他诗人之间关系，可关闭窗口再继续输入其他诗人的姓名)，完成活动 1 的填图。</li>
            </ul>
        </div>
      </div>
      <div class="card border-0">
        <div class="card-body">
          <p class="card-title font-weight-normal"><i class="icon iconfont icon-xinbaniconshangchuan-8 icon-md text-info"></i> 初步研究结论</p>
        </div>
        <div class="card" style="padding: 20px;">
          <p>通过这个项目研究，你有哪些发现和思考?</p>
          <div class="input-line">
            <span>1. </span>
            <div class="js_bunde text-input" style="width: 100%" name="input-53" contenteditable="true"></div>
          </div>
          <div class="input-line">
            <span>2. </span>
            <div class="js_bunde text-input" style="width: 100%" name="input-54" contenteditable="true"></div>
          </div>
          <div class="input-line">
            <span>3. </span>
            <div class="js_bunde text-input" style="width: 100%" name="input-55" contenteditable="true"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" crossorigin="anonymous"></script>
  <script>
    $(function() {
      var localKey = 'limin-local'
      var data = {}
      // 页面加载后从本地缓存加载数据
      if ('localStorage' in window) {
        var dataStr = localStorage.getItem(localKey) || '{}'
        data = JSON.parse(dataStr)
        $('.js_bunde').each(function() {
          var $this = $(this)
          var key = $this.attr('name')
          if (data[key]) {
            $this.text(data[key])
          }
        })
      }

      $('.js_bunde').on('keyup', function() {
        var $this = $(this)
        var key = $this.attr('name')
        var text = $this.text()
        data[key] = text
        localStorage.setItem(localKey, JSON.stringify(data))
      })
    })
  </script>
</body>
</html>
